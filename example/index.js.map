{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["class Lock {\n  constructor({\n    container = null,\n    keyboard = [3, 3],\n    errorDuration = 2000,\n    onResult = null,\n    onChange = null\n  } = {}) {\n    this._container = container;\n    this._errorDuration = errorDuration;\n    this._errorTimer = null;\n    this._keyboard = keyboard;\n    this._onResult = onResult;\n    this._onChange = onChange;\n\n    // {[key: string]: number} 坐标和数字键盘的映射表\n    this._numberMap = {};\n\n    // record body overflow\n    this._bodyOldOverflow = '';\n\n    // string[], 结果集\n    this._resultCoordinates = [];\n    this._touchmove = this._touchmove.bind(this);\n\n    this._init();\n  }\n\n  _init() {\n    this._container.style.position = 'relative';\n\n    const bgCanvas = document.createElement('canvas');\n    const interactionCanvas = document.createElement('canvas');\n\n    this._width = this._container.getBoundingClientRect().width;\n    this._height = this._container.getBoundingClientRect().height;\n    this._radius = (Math.min(this._width, this._height) / Math.max(...this._keyboard)) / 3;\n    bgCanvas.width = interactionCanvas.width = this._width;\n    bgCanvas.height = interactionCanvas.height = this._height;\n    bgCanvas.style.position = 'absolute';\n    interactionCanvas.style.position = 'absolute';\n\n    this._bgCtx = bgCanvas.getContext('2d');\n    this._interactionCtx = interactionCanvas.getContext('2d');\n\n    this._bgCanvas = bgCanvas;\n    this._interactionCanvas = interactionCanvas;\n\n    this._container.appendChild(this._bgCanvas);\n    this._container.appendChild(this._interactionCanvas);\n\n    this._drawBg();\n    this._bindEvent();\n  }\n\n  _drawBg() {\n    const [rows, cols] = this._keyboard;\n    const width = this._width;\n    const height = this._height;\n    const rowOffset = width / (rows + 1);\n    const colOffset = height / (cols + 1);\n    for (let col = 0; col < cols; col++) {\n      for (let row = rows; row > 0; row--) {\n        const circleX = rowOffset * row;\n        const circleY = colOffset * (col + 1);\n        // 从上往下, 从右往左, 递减的绘制圆\n        this._numberMap[`${circleX}_${circleY}`] = (cols - col) * rows - (rows - row);\n        this._bgCtx.save();\n        this._bgCtx.beginPath();\n        this._bgCtx.moveTo(circleX + this._radius, circleY);\n        this._bgCtx.arc(circleX, circleY, this._radius, 0, Math.PI * 2);\n        this._bgCtx.stroke();\n        this._bgCtx.restore();\n      }\n    }\n  }\n\n  // calculate the coordinate of the hand relative to then container\n  _calculateRelativeCoordinate(clientX, clientY) {\n    let relativeX = 0;\n    let relativeY = 0;\n\n    if (clientX && clientY) {\n      const { x: containerX, y: containerY } = this._container.getBoundingClientRect();\n      relativeX = clientX - containerX;\n      relativeY = clientY - containerY;\n    }\n    return {\n      relativeX,\n      relativeY\n    }\n  }\n\n  _clearInteraction() {\n    this._interactionCtx.clearRect(0, 0, this._width, this._height);\n  }\n\n  _drawInteraction(clientX, clientY, color = 'black') {\n\n    const {\n      relativeX, relativeY\n    } = this._calculateRelativeCoordinate(clientX, clientY);\n\n    this._calculateResult(relativeX, relativeY);\n\n    this._drawInteractionNotLastLine(color);\n    this._drawInteractionLastLine(relativeX, relativeY);\n  }\n\n  _calculateResult(relativeX, relativeY) {\n    const [rows, cols] = this._keyboard;\n    const width = this._width;\n    const height = this._height;\n    const rowOffset = width / (rows + 1);\n    const colOffset = height / (cols + 1);\n\n    // calculate whether the hand is in the circle\n    for (let col = 0; col < cols; col++) {\n      for (let row = 0; row < rows; row++) {\n        const circleX = rowOffset * (row + 1);\n        const circleY = colOffset * (col + 1);\n        const isInCircle = Math.sqrt(Math.pow(relativeX - circleX, 2) + Math.pow(relativeY - circleY, 2)) - this._radius < 0;\n        if (isInCircle && !this._resultCoordinates.includes(`${circleX}_${circleY}`)) {\n          this._resultCoordinates.push(`${circleX}_${circleY}`);\n\n          if (this._onChange) {\n            const result = this._resultCoordinates.map(coordinate => {\n              const [x, y] = coordinate.split('_');\n              return this._numberMap[`${x}_${y}`];\n            });\n            this._onChange(result);\n          }\n        }\n      }\n    }\n  }\n\n  _drawInteractionNotLastLine(color = 'black') {\n    this._clearInteraction();\n    this._drawInteractionCircle(color);\n    this._drawInteractionConnectingLine(color);\n  }\n\n  _drawInteractionCircle(fillStyle = 'black') {\n    this._resultCoordinates.forEach(coordinate => {\n      const [pointX, pointY] = coordinate.split('_');\n      this._interactionCtx.save();\n      this._interactionCtx.beginPath();\n      this._interactionCtx.moveTo(pointX + this._radius / 2, pointY);\n      this._interactionCtx.fillStyle = fillStyle;\n      this._interactionCtx.arc(pointX, pointY, this._radius / 3, 0, Math.PI * 2);\n      this._interactionCtx.fill();\n      this._interactionCtx.restore();\n    });\n  }\n\n  _drawInteractionConnectingLine(strokeStyle = 'black') {\n    if (this._resultCoordinates.length === 0) {\n      return\n    }\n    const [pointX, pointY] = this._resultCoordinates[0].split('_');\n    this._interactionCtx.save();\n    this._interactionCtx.beginPath();\n    this._interactionCtx.moveTo(pointX, pointY);\n    this._resultCoordinates.forEach((coordinate, index) => {\n      if (index === 0) {\n        return;\n      }\n      const [pointX, pointY] = coordinate.split('_');\n      this._interactionCtx.lineTo(pointX, pointY);\n    });\n    this._interactionCtx.strokeStyle = strokeStyle;\n    this._interactionCtx.stroke();\n    this._interactionCtx.restore();\n  }\n\n  _drawInteractionLastLine(relativeX, relativeY) {\n    if (this._resultCoordinates.length > 0) {\n      const [lastPointX, lastPointY] = this._resultCoordinates[this._resultCoordinates.length - 1].split('_');\n      this._interactionCtx.save();\n      this._interactionCtx.beginPath();\n      this._interactionCtx.moveTo(lastPointX, lastPointY);\n      this._interactionCtx.lineTo(relativeX, relativeY);\n      this._interactionCtx.strokeStyle = 'black';\n      this._interactionCtx.stroke();\n      this._interactionCtx.restore();\n    }\n  }\n\n  _feedback() {\n\n    const result = this._resultCoordinates.map(coordinate => {\n      const [x, y] = coordinate.split('_');\n      return this._numberMap[`${x}_${y}`];\n    });\n\n    this._interactionCanvas.removeEventListener('touchmove', this._touchmove);\n    this._drawInteractionNotLastLine();\n\n    const self = this;\n    const callback = this._onResult && this._onResult(result);\n\n    if (Object.prototype.toString.call(callback) === '[object Promise]') {\n      self.loading();\n      callback.then(() => {\n        self.success();\n      }).catch(() => {\n        self.error();\n      })\n    }\n  }\n\n  _bindEvent() {\n    this._interactionCanvas.addEventListener('touchstart', e => {\n      // make it impossible to scroll while moving\n      this._bodyOldOverflow = document.body.style.overflow;\n      document.body.style.overflow = 'hidden';\n\n      this._resultCoordinates = [];\n      const { clientX, clientY } = e.touches[0];\n      if (this._errorTimer) {\n        clearTimeout(this._errorTimer);\n      }\n      this._drawInteraction(clientX, clientY);\n      this._isTouchstart = true;\n      this._interactionCanvas.addEventListener('touchmove', this._touchmove);\n    })\n\n    this._interactionCanvas.addEventListener('touchend', () => {\n      document.body.style.overflow = this._bodyOldOverflow;\n      this._isTouchstart = false;\n      if (this._resultCoordinates.length > 0) {\n        this._feedback();\n      }\n    })\n\n  }\n\n  _touchmove(e) {\n    const { clientX, clientY } = e.touches[0];\n    this._drawInteraction(clientX, clientY);\n  }\n\n  loading(text = 'checking...') {\n    this._interactionCtx.save();\n    this._interactionCtx.textAlign = 'center';\n    this._interactionCtx.font = '48px serif';\n    this._interactionCtx.fillStyle = 'rgba(0, 0, 0, 0.5)';\n    this._interactionCtx.fillRect(0, 0, this._width, this._height);\n    this._interactionCtx.fillStyle = 'rgba(0, 0, 0, 1)';\n    this._interactionCtx.fillText(text, this._width / 2, this._height / 2)\n    this._interactionCtx.restore()\n  }\n\n  error() {\n    this._drawInteractionNotLastLine('red');\n    this._errorTimer = setTimeout(() => {\n      this._clearInteraction();\n    }, this._errorDuration);\n  }\n\n  success() {\n    this._resultCoordinates = [];\n    this._clearInteraction();\n  }\n}\n\nexport default Lock;\n\n"],"names":[],"mappings":"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"}